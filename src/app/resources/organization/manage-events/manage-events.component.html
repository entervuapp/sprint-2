<div class="addEventBlock">
  <div class="addEventFormBlock">
    <form
      [formGroup]="formGroupObject"
      appHighlightRequiredFields
      appFocusInvalidInput
      appFocusFirstEmptyInput
    >
      form {{ formGroupObject.valid }}
      <h2>Add Events</h2>
      <div class="addEventsForm">
        <div class="form-group formGroupAddEvents">
          <label for="text"
            >{{ displayTextObj["name"] }}
            <span
              [ngClass]="{
                error: checkForError(formGroupObject, 'name')
              }"
              >*</span
            ></label
          >
          <input
            type="text"
            class="form-control"
            [ngClass]="{
              'input-field-error': checkForError(formGroupObject, 'name')
            }"
            id="name"
            placeholder="Enter Name"
            name="name"
            formControlName="name"
          />
          <app-error-message
            *ngIf="checkForError(formGroupObject, 'name')"
            [formObject]="formGroupObject"
            [controlName]="'name'"
            [fieldName]="'Name'"
          ></app-error-message>
        </div>
        <div class="form-group formGroupAddEvents">
          <label for="text"
            >{{ displayTextObj["eventDate"]
            }}<span
              [ngClass]="{
                error: checkForError(formGroupObject, 'eventDate')
              }"
              >*</span
            ></label
          >
          <input
            type="date"
            class="form-control"
            [ngClass]="{
              'input-field-error': checkForError(formGroupObject, 'eventDate')
            }"
            id="eventDate"
            placeholder="Enter date"
            name="eventDate"
            formControlName="eventDate"
          />
          <app-error-message
            *ngIf="checkForError(formGroupObject, 'eventDate')"
            [formObject]="formGroupObject"
            [controlName]="'eventDate'"
            [fieldName]="'Date'"
          ></app-error-message>
        </div>
        <div class="form-group formGroupAddEvents">
          <label for="text"
            >{{ displayTextObj["eventTime"] }}
            <span
              [ngClass]="{
                error: checkForError(formGroupObject, 'eventTime')
              }"
              >*</span
            ></label
          >
          <app-time-input-field
            [isTouched]="formGroupObject.controls.eventTime.touched"
            [resetField]="resetField"
            (onChange)="onTimeChange($event)"
          ></app-time-input-field>
        </div>
      </div>
      <div class="addEventsForm">
        <div>
          <div class="form-group formGroupAddEvents">
            <label for="text"
              >{{ displayTextObj["skill"]
              }}<span
                *ngIf="
                  formGroupObject.controls.skill.value ||
                  formGroupObject.controls.numberOfRounds.value ||
                  skillsList.length === 0
                "
                [ngClass]="{
                  error: checkForError(formGroupObject, 'skill')
                }"
                >*</span
              ></label
            >
            <input
              type="text"
              class="form-control"
              [ngClass]="{
                'input-field-error': checkForError(formGroupObject, 'skill')
              }"
              id="skill"
              placeholder="Skill"
              name="skill"
              formControlName="skill"
            />
            <app-error-message
              *ngIf="checkForError(formGroupObject, 'skill')"
              [formObject]="formGroupObject"
              [controlName]="'skill'"
              [fieldName]="'Skill'"
            ></app-error-message>
          </div>
          <div class="form-group formGroupAddEvents">
            <label for="text"
              >{{ displayTextObj["numberOfRounds"]
              }}<span
                *ngIf="
                  formGroupObject.controls.numberOfRounds.value ||
                  formGroupObject.controls.skill.value ||
                  skillsList.length === 0
                "
                [ngClass]="{
                  error: checkForError(formGroupObject, 'numberOfRounds')
                }"
                >*</span
              ></label
            >
            <input
              type="text"
              class="form-control"
              [ngClass]="{
                'input-field-error': checkForError(
                  formGroupObject,
                  'numberOfRounds'
                )
              }"
              id="numberOfRounds"
              placeholder="Number of Rounds"
              name="numberOfRounds"
              formControlName="numberOfRounds"
              appNumbersOnly
              (onNgModelChange)="onChangeOfRounds($event)"
            />
            <app-error-message
              *ngIf="checkForError(formGroupObject, 'numberOfRounds')"
              [formObject]="formGroupObject"
              [controlName]="'numberOfRounds'"
              [fieldName]="'Number of rounds'"
            ></app-error-message>
          </div>
          <div>
            <input
              type="button"
              value="Add"
              class="btn btn-primary"
              (click)="validateSkillSubmit() && addNewSkill()"
            />
          </div>
        </div>
        <div>
          <div *ngFor="let skillObj of skillsList; let i = index">
            <span> {{ skillObj.skill }}</span>
            <span>{{ skillObj.numberOfRounds }}</span>
            <input
              type="button"
              value="Delete"
              class="btn btn-primary"
              (click)="removeSkill(i)"
            /><input
              type="button"
              value="Edit"
              class="btn btn-primary"
              (click)="onSkillEdit(skillObj, i)"
            />
          </div>
        </div>
      </div>
      <app-save-cancel-buttons
        (onSave)="formGroupObject.valid && onSubmit()"
        (onCancel)="onReset()"
        saveButtonName="Submit"
        cancelButtonName="Reset"
      ></app-save-cancel-buttons>
    </form>
  </div>

  <div class="EventListBlock">
    <h3>Events list</h3>
    <div class="addEventsTable">
      <div
        class="table-responsive manageEventsListTable tab-pane fade show active"
        id="home"
        role="tabpanel"
        aria-labelledby="home-tab"
      >
        <table class="table table-bordered table-md">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Event Name</th>
              <th scope="col">Date</th>
              <th scope="col">Time</th>
              <th scope="col">Skills</th>
              <th scope="col">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let event of eventsList; let i = index">
              <th scope="row">{{ i + 1 }}</th>
              <td>{{ event.name }}</td>
              <td>
                <app-display-date
                  [dateInput]="event && event.eventDate"
                ></app-display-date>
              </td>
              <td>
                {{ event.eventTime }}
              </td>
              <td>
                <ul>
                  <li *ngFor="let skillObj of event.skillsList">
                    {{ skillObj.skill }}
                  </li>
                </ul>
              </td>
              <td>
                <a href="javascript:void(0)" (click)="onEditOfEvent(event)">
                  Edit
                </a>
                |
                <a href="javascript:void(0)" (click)="onDeleteOfEvent(i)">
                  Delete
                </a>
              </td>
            </tr>
            <tr
              *ngIf="
                (eventsList && eventsList.length === 0) ||
                eventsList === undefined ||
                eventsList === null
              "
            >
              <app-no-records-found></app-no-records-found>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
