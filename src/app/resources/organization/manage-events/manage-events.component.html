<div class="addEventBlock container">
  <app-alerts [alertsList]="alerts"></app-alerts>
  <div class="addEventFormBlock">
    <form
      [formGroup]="formGroupObject"
      appHighlightRequiredFields
      appFocusInvalidInput
      appFocusFirstEmptyInput
    >
      <h2>Add Events</h2>
      <div class="addEventsFormCard">
        <div class="addEventsForm">
          <div class="form-group formGroupAddEvents">
            <label for="text"
              >{{ displayTextObj["name"] }}
              <span
                [ngClass]="{
                  error: checkForError(formGroupObject, 'name')
                }"
                >*</span
              ></label
            >
            <input
              type="text"
              class="form-control"
              [ngClass]="{
                'input-field-error': checkForError(formGroupObject, 'name')
              }"
              id="name"
              placeholder="Enter Name"
              name="name"
              formControlName="name"
            />
            <app-error-message
              *ngIf="checkForError(formGroupObject, 'name')"
              [formObject]="formGroupObject"
              [controlName]="'name'"
              [fieldName]="'Name'"
            ></app-error-message>
          </div>
          <div class="form-group formGroupAddEvents">
            <label for="text"
              >{{ displayTextObj["eventDate"]
              }}<span
                [ngClass]="{
                  error: checkForError(formGroupObject, 'eventDate')
                }"
                >*</span
              ></label
            >
            <input
              type="date"
              class="form-control"
              [ngClass]="{
                'input-field-error': checkForError(formGroupObject, 'eventDate')
              }"
              id="eventDate"
              placeholder="Enter date"
              name="eventDate"
              formControlName="eventDate"
              [min]="mininumEventDate"
            />
            <app-error-message
              *ngIf="checkForError(formGroupObject, 'eventDate')"
              [formObject]="formGroupObject"
              [controlName]="'eventDate'"
              [fieldName]="'Date'"
            ></app-error-message>
          </div>
          <div class="form-group formGroupAddEvents">
            <label for="text"
              >{{ displayTextObj["eventTime"] }}
              <span
                [ngClass]="{
                  error: checkForError(formGroupObject, 'eventTime')
                }"
                >*</span
              ></label
            >
            <app-time-input-field
              [isTouched]="formGroupObject.controls.eventTime.touched"
              [resetField]="resetField"
              [renderValue]="formGroupObject.controls.eventTime.value"
              (onChange)="onTimeChange($event)"
            ></app-time-input-field>
          </div>
        </div>
        <hr class="addEventsFormHr" />
        <div class="addEventsForm">
          <div>
            <div class="form-group formGroupAddEvents autoFormGroup">
              <label for="text"
                >{{ displayTextObj["skill"]
                }}<span
                  *ngIf="
                    formGroupObject.controls.skill['controls'].description
                      .value ||
                    formGroupObject.controls.numberOfRounds.value ||
                    skillsList.length === 0
                  "
                  [ngClass]="{
                    error: checkForError(formGroupObject, 'skill')
                  }"
                  >*</span
                ></label
              >
              <input
                type="text"
                class="form-control autoFormControl"
                [ngClass]="{
                  'input-field-error': checkForError(formGroupObject, 'skill')
                }"
                id="skill"
                placeholder="Skill"
                name="skill"
                [formControl]="
                  formGroupObject.controls.skill['controls'].description
                "
                (keyup)="onSkillChange()"
              />
              <app-error-message
                *ngIf="checkForError(formGroupObject, 'skill')"
                [formObject]="formGroupObject"
                [controlName]="'skill'"
                [fieldName]="'Skill'"
              ></app-error-message>
            <div
              class="listArrayCard"
              *ngIf="
                filteredSkillOptionsList && filteredSkillOptionsList.length
              "
            >
              <p
                *ngFor="let skill of filteredSkillOptionsList"
                (click)="onSkillOptionSelect(skill)"
              >
                {{ skill.description }}
              </p>
            </div>
          </div>
            <div class="form-group formGroupAddEvents">
              <label for="text"
                >{{ displayTextObj["numberOfRounds"]
                }}<span
                  *ngIf="
                    formGroupObject.controls.numberOfRounds.value ||
                    formGroupObject.controls.skill['controls'].description
                      .value ||
                    skillsList.length === 0
                  "
                  [ngClass]="{
                    error: checkForError(formGroupObject, 'numberOfRounds')
                  }"
                  >*</span
                ></label
              >
              <input
                type="text"
                class="form-control"
                [ngClass]="{
                  'input-field-error': checkForError(
                    formGroupObject,
                    'numberOfRounds'
                  )
                }"
                id="numberOfRounds"
                placeholder="Number of Rounds"
                name="numberOfRounds"
                formControlName="numberOfRounds"
                appNumbersOnly
                (onNgModelChange)="onChangeOfRounds($event)"
              />
              <app-error-message
                *ngIf="checkForError(formGroupObject, 'numberOfRounds')"
                [formObject]="formGroupObject"
                [controlName]="'numberOfRounds'"
                [fieldName]="'Number of rounds'"
              ></app-error-message>
            </div>
            <div>
              <input
                type="button"
                value="Add"
                class="btn btn-primary addEventSkillBtn"
                (click)="validateSkillSubmit() && addNewSkill()"
              />
            </div>
          </div>
          <div class="skillRoundsDetailBlock">
            <div *ngFor="let skillObj of skillsList; let i = index">
              <span> {{ skillObj.skill.description }}</span>
              <span>{{ skillObj.numberOfRounds }}</span>
              <diV class="editRemoveBtns">
                <input
                  type="button"
                  value="Delete"
                  class="removeBtn"
                  (click)="removeSkill(i)"
                />
                |
                <input
                  type="button"
                  value="Edit"
                  class="EditBtn"
                  (click)="onSkillEdit(skillObj, i)"
                />
              </diV>
            </div>
          </div>
        </div>
      </div>
      <div class="eventsSubmitCancelBtns">
        <app-save-cancel-buttons
          (onSave)="formGroupObject.valid && onSave()"
          (onCancel)="onReset()"
          [saveButtonName]="formGroupObject.value.id ? 'Update' : 'Save'"
          cancelButtonName="Reset"
        ></app-save-cancel-buttons>
      </div>
    </form>
  </div>

  <div class="EventListBlock">
    <h2>Events list</h2>
    <div class="addEventsTable">
      <div
        class="eventListCard"
        *ngFor="let event of eventsList; let i = index"
      >
        <div class="eventListCardHead">
          <div class="row">
            <div class="col-sm-8">
              <h3>{{ event.name }}</h3>
            </div>
            <div class="col-sm-4">
              <div class="eventListCardEditDelete">
                <span class="deleteIcon"
                  ><fa-icon
                    class="cursor-pointer"
                    [icon]="fontIcon.faEdit"
                    (click)="onEditOfEvent(event)"
                  ></fa-icon
                ></span>
                <span class="editIcon"
                  ><fa-icon
                    class="cursor-pointer"
                    [icon]="fontIcon.faTrash"
                    (click)="onDeleteOfEvent(event)"
                  ></fa-icon
                ></span>
              </div>
            </div>
          </div>
        </div>
        <div class="eventListCardContent">
          <div class="row">
            <div class="col-sm-4">
              <app-display-date
                [dateInput]="event && event.eventDate"
              ></app-display-date>
            </div>
            <div class="col-sm-4">
              <p class="eventTime">{{ event.eventTime }}</p>
            </div>
            <div class="col-sm-4">
              <p
                class="eventSkills"
                data-toggle="tooltip"
                [title]="prepareSkillsForDisplay(event, true)"
              >
                {{ prepareSkillsForDisplay(event) }}
              </p>
            </div>
          </div>
        </div>
        <div class="eventListCardAddBtn">
          <div class="row">
            <div class="col-sm-4">
              <p
                class="eventAddMembers"
                (click)="
                  navigateToScreen(
                    ROUTE_URL_PATH_CONSTANTS.ROUTE_URL_PATH.MANAGE_CANDIDATE,
                    event
                  )
                "
              >
                Add Members +
              </p>
            </div>
            <div class="col-sm-4"></div>
            <div class="col-sm-4">
              <p class="eventOfferedMem">Offered Membered List</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
